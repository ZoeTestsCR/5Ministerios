<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Cuestionario – 5 Ministerios</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body class="bg-gray-100 p-6">
<div class="max-w-4xl mx-auto bg-white p-6 rounded shadow">
<h1 class="text-2xl font-bold text-center mb-6" id="titulo1">
Cuestionario sobre mi desempeño en los 5 ministerios
</h1>

<h1 style="display: none; class="text-2xl font-bold text-center mb-6" id="titulo2">
Resultado - 5 ministerios
</h1>

<p style="text-align:center" id="enunciado">
  En cada bloque elige <strong>una sola afirmación</strong> con la que más te identifiques.
</p>

<form id="quiz"></form>

<button id="finish" disabled class="mt-6 bg-black text-white px-4 py-2 rounded w-full">
Ver resultados
</button>

<div id="results" class="hidden mt-6 text-center">
<canvas id="chart"></canvas>
<button onclick="exportPDF()" class="mt-4 bg-black text-white px-4 py-2 rounded">
Descargar PDF
</button>
</div>
</div>

<script>
const blocks = [{"id": 1, "a_text": "Creo un ambiente audaz.", "a_min": "profeta", "b_text": "Ayudo a la iglesia local a preparar la mesa para la comunión con la gente de afuera.", "b_min": "pastor"}, {"id": 2, "a_text": "Ayudo en el proceso de curación a través de las relaciones.", "a_min": "pastor", "b_text": "Pienso estratégicamente en la iglesia y sus funciones.", "b_min": "apostol"}, {"id": 3, "a_text": "Desarrollo un entorno curativo.", "a_min": "pastor", "b_text": "Exploro nuevas áreas de actividad.", "b_min": "apostol"}, {"id": 4, "a_text": "Desenmascaro la idolatría y el falso culto entre el pueblo de Dios.", "a_min": "profeta", "b_text": "Recuperando datos. Espere unos segundos e intente cortar o copiar nuevamente.", "b_min": "evangelista"}, {"id": 5, "a_text": "Encarno la reconciliación y el vivir en paz unos con otros.", "a_min": "pastor", "b_text": "Soy muy sensible a la voz de Dios.", "b_min": "profeta"}, {"id": 6, "a_text": "Ayudo a la comunidad a quitarse las máscaras.", "a_min": "profeta", "b_text": "Amo a la gente individual o colectivamente.", "b_min": "pastor"}, {"id": 7, "a_text": "Siento las necesidades de los demás.", "a_min": "pastor", "b_text": "Discierno la realidad espiritual en diferentes situaciones o en la comunidad.", "b_min": "profeta"}, {"id": 8, "a_text": "Comunico las realidades espirituales en el momento oportuno y de la manera adecuada.", "a_min": "profeta", "b_text": "Comprender los principios de Dios a través de la narrativa de las Escrituras.", "b_min": "maestro"}, {"id": 9, "a_text": "Deseo fervientemente compartir el mensaje de Cristo con los demás.", "a_min": "evangelista", "b_text": "Actúo como portavoz de Dios.", "b_min": "profeta"}, {"id": 10, "a_text": "Ayudo a las personas a aplicar su comprensión de su nueva vida.", "a_min": "maestro", "b_text": "Quedo atento a testimonios personales.", "b_min": "evangelista"}, {"id": 11, "a_text": "Ayudo con la curación espiritual.", "a_min": "pastor", "b_text": "Vivo en línea con la Palabra.", "b_min": "maestro"}, {"id": 12, "a_text": "Disfruto con las historias de fe de otras personas.", "a_min": "maestro", "b_text": "Me encanta probar cosas nuevas.", "b_min": "apostol"}, {"id": 13, "a_text": "Tengo un alto grado de paciencia con la gente.", "a_min": "pastor", "b_text": "Priorizo ​​el desarrollo de todo tipo de acciones involucrando a los 5 ministerios.", "b_min": "apostol"}, {"id": 14, "a_text": "Discierno las consecuencias del desalineamiento con los caminos de Dios.", "a_min": "profeta", "b_text": "Trabajo en la conciliación de las relaciones personales.", "b_min": "pastor"}, {"id": 15, "a_text": "Conectar a los líderes con las misiones.", "a_min": "apostol", "b_text": "Permanezco alerta a lo que Dios me llama a hacer.", "b_min": "profeta"}, {"id": 16, "a_text": "Vivo una vida que impacta a la gente desde fuera.", "a_min": "evangelista", "b_text": "Lanzo visiones inspiradoras.", "b_min": "apostol"}, {"id": 17, "a_text": "Actúo como voz de alarma en una organización.", "a_min": "profeta", "b_text": "Ayudo a las personas a profundizar su comprensión de los temas espirituales.", "b_min": "maestro"}, {"id": 18, "a_text": "Quiero llevar a las personas a alcanzar la madurez espiritual.", "a_min": "pastor", "b_text": "Enseño de tal manera que el contenido cobra vida.", "b_min": "maestro"}, {"id": 19, "a_text": "Transmito la misión de Dios a su pueblo y a su comunidad.", "a_min": "profeta", "b_text": "Realmente disfruto hablar y compartir mi fe en Jesucristo con los demás.", "b_min": "evangelista"}, {"id": 20, "a_text": "Me gano la confianza de los demás.", "a_min": "pastor", "b_text": "Enseño de una manera que facilita la comprensión profunda.", "b_min": "maestro"}, {"id": 21, "a_text": "Fomentar la responsabilidad y la rendición de cuentas a Dios.", "a_min": "pastor", "b_text": "Ayudo a personas de fuera a conectarse con Dios.", "b_min": "evangelista"}, {"id": 22, "a_text": "Trabajo para reconciliar las relaciones con Dios.", "a_min": "evangelista", "b_text": "Demuestro un alto grado de empatía y compasión.", "b_min": "pastor"}, {"id": 23, "a_text": "Creo un entorno de aprendizaje.", "a_min": "maestro", "b_text": "Tomo actitudes y acciones catalizadoras.", "b_min": "apostol"}, {"id": 24, "a_text": "Enseñar para que las personas crezcan en su comprensión de Dios.", "a_min": "maestro", "b_text": "Ayudo a las personas a crecer en santidad personal.", "b_min": "pastor"}, {"id": 25, "a_text": "Busco principalmente fidelidad a la causa de Dios.", "a_min": "profeta", "b_text": "Amo a las personas y sus comunidades.", "b_min": "evangelista"}, {"id": 26, "a_text": "Me preocupa el destino de quienes no conocen a Jesús.", "a_min": "evangelista", "b_text": "Tengo muchas ganas de experimentar y arriesgarme.", "b_min": "apostol"}, {"id": 27, "a_text": "Comparto ejemplos prácticos de cristianos a través de la enseñanza.", "a_min": "maestro", "b_text": "Me resulta fácil entender que la gente tenga su desierto («tiempo en el pozo»).", "b_min": "pastor"}, {"id": 28, "a_text": "Desarrollar estructuras para maximizar el uso de regalos en la comunidad.", "a_min": "apostol", "b_text": "Me resulta fácil entender que la gente tenga su desierto («tiempo en el pozo»).", "b_min": "pastor"}, {"id": 29, "a_text": "Siento compasión por los marginados.", "a_min": "evangelista", "b_text": "Ayudo a las personas a sentirse como en familia.", "b_min": "pastor"}, {"id": 30, "a_text": "Sirvo de puente para personas con vida nueva en Cristo.", "a_min": "pastor", "b_text": "Puedo comunicar bien el evangelio.", "b_min": "evangelista"}, {"id": 31, "a_text": "Estoy comprometido a ayudar a las personas a regresar a Dios.", "a_min": "evangelista", "b_text": "Tengo la capacidad de desarrollar nuevas formas de pensar y hacer.", "b_min": "apostol"}, {"id": 32, "a_text": "Doy poder a las personas para que contribuyan a la movilización.", "a_min": "apostol", "b_text": "Comparto el mensaje de forma eficaz y de forma sencilla y comprensible.", "b_min": "evangelista"}, {"id": 33, "a_text": "Ayudo a la comunidad de fe a profundizar en la Palabra.", "a_min": "maestro", "b_text": "Hago un llamado a la gente a volver a adorar al único Dios.", "b_min": "profeta"}, {"id": 34, "a_text": "Puedo ver las conexiones teológicas entre las Escrituras y la historia.", "a_min": "maestro", "b_text": "Discierno el mensaje de la verdad.", "b_min": "profeta"}, {"id": 35, "a_text": "Me enfoco en compartir la historia de Jesús.", "a_min": "evangelista", "b_text": "Tengo la sensibilidad para comprender a las personas en su situación de vida.", "b_min": "pastor"}, {"id": 36, "a_text": "Apoyar a la iglesia en la práctica de escuchar a Dios.", "a_min": "profeta", "b_text": "Ayudo a las personas a examinar sus vidas en relación con la Palabra de Dios.", "b_min": "maestro"}, {"id": 37, "a_text": "Me alegra aprender los preceptos de la Palabra de Dios.", "a_min": "maestro", "b_text": "Me motiva ver personas acercándose a Cristo.", "b_min": "evangelista"}, {"id": 38, "a_text": "Digo la verdad sin importar las fuerzas involucradas.", "a_min": "profeta", "b_text": "Me ocupo de valorar el ADN esencial de la organización.", "b_min": "apostol"}, {"id": 39, "a_text": "Muestro el valor del rol estratégico en la organización.", "a_min": "apostol", "b_text": "Organizo conceptos de las Escrituras para brindar una mejor comprensión.", "b_min": "maestro"}, {"id": 40, "a_text": "Apuesto por la comunicación culturalmente contextualizada.", "a_min": "evangelista", "b_text": "Trabajo para simplificar lo complejo.", "b_min": "maestro"}, {"id": 41, "a_text": "Extiendo y amplío las misiones en lugar de mantenerlas como están.", "a_min": "apostol", "b_text": "Transfiero y transmito conceptos de forma accesible.", "b_min": "maestro"}, {"id": 42, "a_text": "Inspiro a las personas a actuar sobre el mensaje de Dios.", "a_min": "profeta", "b_text": "Animo a las personas a vivir su vocación.", "b_min": "apostol"}, {"id": 43, "a_text": "Llevo una visión de multiplicación.", "a_min": "apostol", "b_text": "Inspiro a la gente a orientarse más hacia el exterior.", "b_min": "evangelista"}, {"id": 44, "a_text": "Tengo un profundo deseo de caminar junto a los demás y ayudarlos.", "a_min": "pastor", "b_text": "Inspiro a las personas a abrazar la causa de la organización.", "b_min": "apostol"}, {"id": 45, "a_text": "Tengo una visión orientada al Reino.", "a_min": "apostol", "b_text": "Gestiono oportunidades de aprendizaje comunitario.", "b_min": "maestro"}, {"id": 46, "a_text": "Desarrollo un estilo de movilización encaminado al logro de la misión.", "a_min": "apostol", "b_text": "Cuestiono cómo van las cosas, especialmente en el lado espiritual.", "b_min": "profeta"}, {"id": 47, "a_text": "Permito que las personas evalúen su contexto de vida por sí mismas.", "a_min": "evangelista", "b_text": "Digo la verdad sin importar la reacción del público.", "b_min": "profeta"}, {"id": 48, "a_text": "Veo la Biblia como una sola historia.", "a_min": "maestro", "b_text": "Conduzco a otros al Evangelio.", "b_min": "evangelista"}, {"id": 49, "a_text": "Critico el institucionalismo cuando es necesario.", "a_min": "profeta", "b_text": "Multiplico discípulos, ministerios, comunidades misionales e iglesias.", "b_min": "apostol"}, {"id": 50, "a_text": "Equipo a otros para que compartan su fe.", "a_min": "evangelista", "b_text": "Enseño la Biblia para moldear la cosmovisión de las personas.", "b_min": "maestro"}];
const ministries = {
 apostol:"Apóstol",
 profeta:"Profeta",
 evangelista:"Evangelista",
 pastor:"Pastor",
 maestro:"Maestro"
};
const answers={};
const quiz=document.getElementById("quiz");

blocks.forEach(b=>{
 const d=document.createElement("div");
 d.className="mb-4 p-4 border rounded";
 d.innerHTML=`
 <p class="font-semibold mb-2">Bloque ${b.id}</p>
 <label class="block"><input type="radio" name="${b.id}" value="${b.a_min}"> ${b.a_text}</label>
 <label class="block mt-1"><input type="radio" name="${b.id}" value="${b.b_min}"> ${b.b_text}</label>`;
 quiz.appendChild(d);
 d.querySelectorAll("input").forEach(i=>{
  i.onchange=()=>{
   answers[b.id]=i.value;
   document.getElementById("finish").disabled = Object.keys(answers).length < blocks.length;
  }
 });
});

function EscondeParrafo() {
    
    let paragraph = document.getElementById('enunciado');
    let paragraph2 = document.getElementById('titulo1');
    let paragraph3 = document.getElementById('titulo2');
    
    paragraph.style.display = 'none';
    paragraph2.style.display = 'none';
    paragraph3.style.visibility = 'visible';
    
}

document.getElementById("finish").onclick=()=>{
 quiz.classList.add("hidden");
 document.getElementById("finish").classList.add("hidden");
 document.getElementById("results").classList.remove("hidden");

 const counts={apostol:0,profeta:0,evangelista:0,pastor:0,maestro:0};
 Object.values(answers).forEach(v=>counts[v]++);
 const percentages=Object.values(counts).map(v=>Math.round(v/blocks.length*100));

 /*new Chart(document.getElementById("chart"),{
  type:"pie",
  data:{labels:Object.values(ministries),datasets:[{data:percentages}]}
 });*/
EscondeParrafo();
window.chart = new Chart(document.getElementById("chart"),{
 type:"pie",
 data:{
   labels:Object.values(ministries),
   datasets:[{data:percentages}]
 },
 options:{
   plugins:{
     datalabels:{
       color:"#fff",
       font:{ weight:"bold", size:14 },
       formatter:(value)=> value + "%"
     }
   }
 },
 plugins:[ChartDataLabels]
});

 window.finalResults={counts,percentages};
};

/*function exportPDF(){
 const {jsPDF}=window.jspdf;
 const doc=new jsPDF();
 doc.text("Resultados – 5 Ministerios",20,20);
 let y=40;
 Object.keys(ministries).forEach((k,i)=>{
  doc.text(`${ministries[k]}: ${finalResults.percentages[i]}%`,20,y);
  y+=10;
 });
 doc.save("resultados_5_ministerios.pdf");
}*/

function exportPDF(){
 const {jsPDF}=window.jspdf;
 const doc=new jsPDF();

 doc.text("Resultados – 5 Ministerios",20,20);

 // Agregar gráfico
 const canvas = document.getElementById("chart");
 const imgData = canvas.toDataURL("image/png", 1.0);
 doc.addImage(imgData, "PNG", 20, 30, 170, 170);

 let y = 210;
 /*Object.keys(ministries).forEach((k,i)=>{
   doc.text(`${ministries[k]}: ${finalResults.percentages[i]}%`,20,y);
   y+=8;
 });*/

 doc.save("resultados_5_ministerios.pdf");
}
</script>
</body>
</html>
